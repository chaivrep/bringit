<template name="eventShow">
	<section class="main-section">
		{{#if userIsOwner}} {{> ownerPanel }} {{/if}}
		<div class='row'>

			<!-- Main body column -->
			<div class="medium-8 columns">
				<div class='row '>
					<div class="small-12 columns">
						<div class="row collapse">
							{{#if edit_eventName}}
							<div class="small-12 columns" >
								<h2><input type='text' class="" id="edit_eventName" value="{{evName}}"></h2>
							</div>
							{{else}}
							<div class="small-12 columns" id="nameDiv">
								<h2 id="eventName">{{ evName }}</h2>
							</div>
							{{/if}}	
						</div>
					</div>
				</div>

				{{#if eventDescExists}}
				<div class='row desc-row' >
					<div class="small-12 columns">
						<div class="row collapse">
							{{> descPanel }}
						</div>
					</div>
				</div>
				{{/if}}

				<div class='row'>
					<div class="small-12 columns">
						<ul class="no-bullet">


							{{#each eventItems}}
							<li class="item">
								<div class="row">
									<div class="medium-9 columns">
										<div class="row">
											<div class="small-2  medium-2 columns img-col">
												{{#if itemBringer}}
												<img class="small-img left" src="{{user_image itemBringer}}">
												{{/if}}
											</div>
											<div class="small-10 medium-10 columns ">
												<div class="itemCopy">
													<p class="smaller"><em>{{#if itemBringer}}{{is_bringing itemBringer}}{{/if}}</em></p>
													<h4>{{ itemName }}</h4>
												</div>
											</div>

										</div>

									</div>
									<div class="small-10 medium-3 columns text-center">
										{{#if itemBringer}}
										{{#if userIsBringer itemBringer}}
										<a id="{{itemName}}" class="small radius alert secondary button right full-width unbringit">Un-bring!</a>
										{{else}}
										<a class="small radius secondary button right full-width">Brought!</a>
										{{/if}}
										{{else}}
										<a id="{{itemName}}" class="small radius button right full-width bringit">Bring it!</a>
										{{/if}}	
									</div>
								</div>
								{{#if isOwner}}
								<div class="row">
									<div class="medium-9 columns">
										<div class="row">
											<div class="small-1o small-offset-2 medium-10 medium-offset-2 columns">
												<a href="#" data-id='{{itemName}}' class="deleteItem"><i class="ion-trash-a"></i>Delete item</a>

												<!--Begin Modal-->
												{{> itemDeleteModal this}}
												<!--End Modal-->

											</div>
										</div>
									</div>
								</div>
								{{/if}}
							</li>

							{{/each}}
						</ul>
					</div>
				</div>


				<div class='row'>
					<div class="small-12 columns">
						<div id="addItemPanel" class="callout panel" >
							<h5>
								{{#if add_Item}}
								<input type='text' id="add_itemName" placeholder="What item?">
								{{else}}
								<i class="ion-plus-round"></i> {{#if userIsOwner}}Add item{{else}}Bring something else{{/if}}
								{{/if}}
							</h5>
						</div>
					</div>
				</div>
			</div>
			
			<!--END MAIN CONTENT-->
			<!--BEGIN SIDEBAR-->
			<div class="medium-4 columns sidebarFooter">
				<div class="row collapse sidebar">
					<div class="small-12 columns ">
						<div class='row'>
							<div class="small-12 columns">
								<h3 class="sidebarCopy text-center">Event Info</h3>
							</div>
						</div>

						<div class='row'>
							<div class="small-12 columns">
								<div class="row collapse">
									<div class="small-12 columns">
										<dl>
										<dt class="sidebarCopy">Date:</dt>
										<dd class="sidebarCopy">{{#if edit_eventDate}}
											<input type='date' id="edit_eventDate" value="{{formatDateInput evDate}}">
											{{else}}
											<span id="eventDate">{{ formatDate evDate }}</span>
											{{/if}}
										</dd>
										<dl>
									</div>
								</div>
								<div class="row collapse">
									<div class="small-12 columns">
										<dl>
										<dt class="sidebarCopy">Time:</dt>
										<dd class="sidebarCopy">{{#if edit_eventTime}}
											<select id="edit_eventTime">
												{{#each timeOptions}}
													<option {{selected evTime value}} value="{{value}}">{{label}}</option>
												{{/each}}
											</select>
											{{else}}
											<span id="eventTime">{{ formatTime evTime }}</span>
											{{/if}}
										</dd>
									</dl>
									</div>
								</div>
								<div class='row collapse'>
									<div class="small-12 columns">
										<dl>
										<dt class="sidebarCopy">Where:</dt>
										<dd class="sidebarCopy">{{#if edit_eventLocation}}
											<input type='text' id="edit_eventLocation" value="{{evLoc}}">
											{{else}}
											<span id="eventLocation">{{ evLoc}}</span>
											{{/if}}
										</dd>
										</dl>
									</div>
								</div>
								<div class='row collapse'>
									<div class="small-12 columns ">
										<dl>
										<dt class="sidebarCopy">Your Host:</dt>
										<div>
											<dd class="sidebarCopy"><img class="circle" src="{{user_image evOwner}}">
												{{ user_name evOwner}}
											</dd>
										</div>
										</dl>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		{{> eventDeleteModal this}}
	</section>
	<a class="exit-off-1canvas"></a>

</template>

<template name="ownerPanel">
	<div class="row">
		<div class="small-12 columns">
			<div class="row">
				<div class="small-12 columns" id="ownerAlert">
					<div class="owner panel">
						<div class="row">
							<div class="small-12 medium-6 columns">
								<h6 class="">You are the host of this event.</h6>
							</div>
							<div class="small-12 medium-6 columns">
								<ul class="inline-list ownerFunctions">
									<li><h6><a class="sendInvite"><i class="ion-forward"></i> Send invites</a></h6></li>
									<li><h6><a class="deleteEvent" data-id="{{ _id }}"><i class="ion-trash-a"></i> Delete event</a></h6></li>
									{{> inviteModal}}
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="descPanel">
	{{#if edit_eventDesc}} 
	<div class="small-12 columns" >
		<h5 class='subheader'><input type='text' id="edit_eventDesc" placeholder="{{descPlaceholder}}" value="{{eventDesc}}"></h5>
	</div>
	{{else}}
	<div class="small-12 columns" id="descDiv">
		<h5 class='subheader'><span id="eventDesc">{{ eventDesc }}</span></h5>
	</div>
	{{/if}}
</template>

<template name="eventDeleteModal">
	<div class="small reveal-modal deleteEventModal" data-id='{{ _id }}' data-reveal>
		<div class="row">
			<div class="small-12 columns">
				<p>Are you sure you want to delete this event?</p>
			</div>
		</div>
		<div class="row">
			<div class="small-12 columns">
				<ul class="inline-list modal-buttons-inline">
					<li><a class="confirmDeleteEvent tiny primary button radius" data-id="{{ _id }}">Yes</a></li>
					<li><a class="cancelDeleteEvent tiny secondary button radius">No</a></li>
				</ul>
			</div>
		</div>
	</div>
</template>

<template name="itemDeleteModal">
	<div class="small reveal-modal deleteItemModal" data-id="{{ itemName }}" data-reveal>
		<div class="row">
			<div class="small-12 columns">
				<p>Are you sure you want to delete '{{ itemName }}' from the list?</p>
			</div>
		</div>
		<div class="row">
			<div class="small-12 columns">
				<ul class="inline-list modal-buttons-inline">
					<li><a class="confirmDeleteItem tiny primary button radius" data-id="{{ itemName }}">Yes</a></li>
					<li><a class="cancelDeleteItem tiny secondary button radius">No</a></li>
				</ul>
			</div>
		</div>
	</div>
</template>

<template name="inviteModal">
	<div class="small reveal-modal" id="inviteModal" data-reveal>
		<a class="close-reveal-modal">&#215;</a>
		<div class="row">
			<div class="small-12 columns">
				<p>Copy this URL and send it to your guests: <a>{{currURL}}</a></p>
				
			</div>
		</div>
	</div>
</template>